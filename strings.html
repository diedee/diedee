<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
  <title>String Wave</title>
  <style>
    body { margin: 0; background: black; overflow: hidden; }
  </style>
</head>

<body>
<script>
let baseAmp = 10;          // базовая амплитуда колебаний
let hoverAmp = 40;         // амплитуда при наведении
let freq = 0.02;           // частота волны
let t = 0;                 // время для анимации

function setup() {
  createCanvas(windowWidth, windowHeight);
  strokeWeight(2);
}

function draw() {
  background(0, 30); // лёгкое затухание → эффект "эхо"

  let amp = baseAmp;

  // увеличиваем амплитуду при попадании курсора в зону струны
  if (abs(mouseY - height / 2) < 80) {
    amp = hoverAmp;
  }

  // glow-эффект через несколько линий разной прозрачности
  for (let g = 5; g >= 1; g--) {
    let alpha = map(g, 1, 5, 255, 40);
    stroke(120, 180, 255, alpha); // голубоватое свечение

    drawString(amp - g * 1.5); // чуть разные амплитуды создают свечение/ширину
  }

  t += 0.02;
}

function drawString(amp) {
  beginShape();
  noFill();
  
  for (let x = 0; x < width; x += 10) {
    let wave = sin(x * freq + t) * amp;
    vertex(x, height / 2 + wave);
  }

  endShape();
}

function windowResized() {
  resizeCanvas(windowWidth, windowHeight);
}
</script>
</body>
</html>
